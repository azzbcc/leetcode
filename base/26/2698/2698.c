// ç»™ä½ ä¸€ä¸ªæ­£æ•´æ•° n ï¼Œè¯·ä½ è¿”å› n çš„ æƒ©ç½šæ•° ã€‚
//
// n çš„ æƒ©ç½šæ•° å®šä¹‰ä¸ºæ‰€æœ‰æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ i çš„æ•°çš„å¹³æ–¹å’Œï¼š
//
//
// 1 <= i <= n
// i * i çš„åè¿›åˆ¶è¡¨ç¤ºçš„å­—ç¬¦ä¸²å¯ä»¥åˆ†å‰²æˆè‹¥å¹²è¿ç»­å­å­—ç¬¦ä¸²ï¼Œä¸”è¿™äº›å­å­—ç¬¦ä¸²å¯¹åº”çš„æ•´æ•°å€¼ä¹‹å’Œç­‰äº i ã€‚
//
//
//
//
// ç¤ºä¾‹ 1ï¼š
//
//
// è¾“å…¥ï¼šn = 10
// è¾“å‡ºï¼š182
// è§£é‡Šï¼šæ€»å…±æœ‰ 3 ä¸ªæ•´æ•° i æ»¡è¶³è¦æ±‚ï¼š
// - 1 ï¼Œå› ä¸º 1 * 1 = 1
// - 9 ï¼Œå› ä¸º 9 * 9 = 81 ï¼Œä¸” 81 å¯ä»¥åˆ†å‰²æˆ 8 + 1 ã€‚
// - 10 ï¼Œå› ä¸º 10 * 10 = 100 ï¼Œä¸” 100 å¯ä»¥åˆ†å‰²æˆ 10 + 0 ã€‚
// å› æ­¤ï¼Œ10 çš„æƒ©ç½šæ•°ä¸º 1 + 81 + 100 = 182
//
//
// ç¤ºä¾‹ 2ï¼š
//
//
// è¾“å…¥ï¼šn = 37
// è¾“å‡ºï¼š1478
// è§£é‡Šï¼šæ€»å…±æœ‰ 4 ä¸ªæ•´æ•° i æ»¡è¶³è¦æ±‚ï¼š
// - 1 ï¼Œå› ä¸º 1 * 1 = 1
// - 9 ï¼Œå› ä¸º 9 * 9 = 81 ï¼Œä¸” 81 å¯ä»¥åˆ†å‰²æˆ 8 + 1 ã€‚
// - 10 ï¼Œå› ä¸º 10 * 10 = 100 ï¼Œä¸” 100 å¯ä»¥åˆ†å‰²æˆ 10 + 0 ã€‚
// - 36 ï¼Œå› ä¸º 36 * 36 = 1296 ï¼Œä¸” 1296 å¯ä»¥åˆ†å‰²æˆ 1 + 29 + 6 ã€‚
// å› æ­¤ï¼Œ37 çš„æƒ©ç½šæ•°ä¸º 1 + 81 + 100 + 1296 = 1478
//
//
//
//
// æç¤ºï¼š
//
//
// 1 <= n <= 1000
//
//
// Related Topics æ•°å­¦ å›æº¯ ğŸ‘ 50 ğŸ‘ 0

static int len = 0, help[128];
bool dfs(int target, char *str, int cur) {
    if (!*str) return cur == target;
    for (int i = 0, tmp = 0; str[i]; ++i) {
        if (tmp *= 10, tmp += str[i] - '0', cur + tmp > target) break;
        if (dfs(target, str + i + 1, cur + tmp)) return true;
    }
    return false;
}
void init() {
    char tmp[32];
    static bool initial = false;
    if (initial) return;

    initial = true;
    for (int i = 1; i <= 1000; ++i) {
        sprintf(tmp, "%d", i * i);
        if (dfs(i, tmp, 0)) help[len++] = i;
    }
}
int punishmentNumber(int n) {
    int ans = 0;

    init();
    for (int i = 0; i < len && help[i] <= n; ans += help[i] * help[i], ++i) {}
    return ans;
}
