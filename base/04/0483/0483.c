// å¯¹äºç»™å®šçš„æ•´æ•° n, å¦‚æœnçš„kï¼ˆk>=2ï¼‰è¿›åˆ¶æ•°çš„æ‰€æœ‰æ•°ä½å…¨ä¸º1ï¼Œåˆ™ç§° kï¼ˆk>=2ï¼‰æ˜¯ n çš„ä¸€ä¸ªå¥½è¿›åˆ¶ã€‚
//
// ä»¥å­—ç¬¦ä¸²çš„å½¢å¼ç»™å‡º n, ä»¥å­—ç¬¦ä¸²çš„å½¢å¼è¿”å› n çš„æœ€å°å¥½è¿›åˆ¶ã€‚
//
//
//
// ç¤ºä¾‹ 1ï¼š
//
//
// è¾“å…¥ï¼š"13"
// è¾“å‡ºï¼š"3"
// è§£é‡Šï¼š13 çš„ 3 è¿›åˆ¶æ˜¯ 111ã€‚
//
//
// ç¤ºä¾‹ 2ï¼š
//
//
// è¾“å…¥ï¼š"4681"
// è¾“å‡ºï¼š"8"
// è§£é‡Šï¼š4681 çš„ 8 è¿›åˆ¶æ˜¯ 11111ã€‚
//
//
// ç¤ºä¾‹ 3ï¼š
//
//
// è¾“å…¥ï¼š"1000000000000000000"
// è¾“å‡ºï¼š"999999999999999999"
// è§£é‡Šï¼š1000000000000000000 çš„ 999999999999999999 è¿›åˆ¶æ˜¯ 11ã€‚
//
//
//
//
// æç¤ºï¼š
//
//
// nçš„å–å€¼èŒƒå›´æ˜¯ [3, 10^18]ã€‚
// è¾“å…¥æ€»æ˜¯æœ‰æ•ˆä¸”æ²¡æœ‰å‰å¯¼ 0ã€‚
//
//
//
// Related Topics æ•°å­¦ äºŒåˆ†æŸ¥æ‰¾
// ğŸ‘ 93 ğŸ‘ 0

char *smallestGoodBase(char *sn) {
    // n = {11...11}k = k^l + k^(l-1) + ... + k^1 + k^0
    // (k+1)^l = k^l + C(l,1)k^(l-1) + ... + C(l,l-1)k^1 + k^0 > n
    // k^l < n < (k+1)^l
    // k < n^(1/l) < k+1
    static char str[0x40];
    long n = atol(sn), ans = n - 1, tn = ans;

    for (int l = log2(n), k; l > 1 && tn; --l) {
        tn = ans, k = pow(n, 1.0 / l);
        for (long i = 0, base = 1; i < l && tn >= 0; ++i, tn -= base *= k) {}
        if (tn == 0) ans = k;
    }
    sprintf(str, "%ld", ans);

    return str;
}
